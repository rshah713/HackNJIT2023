#: import rgba kivy.utils.rgba
#: import Colors colors.Colors
<PatientSignup>:
    name: 'patient signup'
        
    ############################## SIGNUP LABEL ##############################
    GridLayout:
        cols: 1
        
        pos_hint: {"top": 1}
        size_hint_y: 0.2
        padding: 0, 25, 0, 0
        
        Label:
            text: "Patient Sign Up"
            font_size: min(self.width*0.3, self.height) * 0.4
            font_name: 'Roboto-Bold'
            color: rgba(Colors.BLUE)
                
    BoxLayout:
        orientation: 'vertical'
            
        pos_hint: {"top": .8}
        size_hint_y: .3
        ############################## EMAIL ##############################
        Label:
            text: "Email:"
            color: rgba(Colors.BLUE)
            font_size: min(self.width, self.height) * 0.5
            size_hint: (.1, .05)
            pos_hint: {'x': 0.15}
        TextInput:
            id: patemail
            size_hint: (.7, .05)
            pos_hint: {'x': 0.15}
            multiline: False
            text: ""
            font_size: min(self.width, self.height) * 0.5
            background_color: rgba(*Colors.BLUE, 0)
            foreground_color: rgba(Colors.ACCENT_BLUE)
                
            canvas.after:
                Color:
                    rgb: rgba(Colors.BLUE)
                Line:
                    width: 2
                    rectangle: self.x, self.y, self.width, self.height
                        
        
                
        ############################## PASSWORD ##############################
                
        Label:
            text: "Password:"
            color: rgba(Colors.BLUE)
            font_size: min(self.width, self.height) * 0.5
            size_hint: (.1, .05)
            pos_hint: {'x': 0.15}
        TextInput:
            id: patpass
            size_hint: (.7, .05)
            pos_hint: {'x': 0.15}
            password: True
            multiline: False
            text: ""
            font_size: min(self.width, self.height) * 0.5
            background_color: rgba(*Colors.BLUE, 0)
            foreground_color: rgba(Colors.ACCENT_BLUE)
                
            canvas.after:
                Color:
                    rgb: rgba(Colors.BLUE)
                Line:
                    width: 2
                    rectangle: self.x, self.y, self.width, self.height
                        
       
        ############################## CONFIRM PASSWORD ##############################
                
        Label:
            text: "Confirm Password:"
            color: rgba(Colors.BLUE)
            font_size: min(self.width, self.height) * 0.5
            size_hint: (.1, .05)
            pos_hint: {'x': 0.2}
        TextInput:
            id: patpassconfirm
            size_hint: (.7, .05)
            pos_hint: {'x': 0.15}
            password: True
            multiline: False
            text: ""
            font_size: min(self.width, self.height) * 0.5
            background_color: rgba(*Colors.BLUE, 0)
            foreground_color: rgba(Colors.ACCENT_BLUE)
                
            canvas.after:
                Color:
                    rgb: rgba(Colors.BLUE)
                Line:
                    width: 2
                    rectangle: self.x, self.y, self.width, self.height
                        
        ############################## EMS ID ##############################
                
        Label:
            text: "Driver License ID:"
            color: rgba(Colors.BLUE)
            font_size: min(self.width, self.height) * 0.5
            size_hint: (.1, .05)
            pos_hint: {'x': 0.2}
        TextInput:
            id: patDriverId
            size_hint: (.7, .05)
            pos_hint: {'x': 0.15}
            password: True
            multiline: False
            text: ""
            font_size: min(self.width, self.height) * 0.5
            background_color: rgba(*Colors.BLUE, 0)
            foreground_color: rgba(Colors.ACCENT_BLUE)
                
            canvas.after:
                Color:
                    rgb: rgba(Colors.BLUE)
                Line:
                    width: 2
                    rectangle: self.x, self.y, self.width, self.height
                        

        ############################## SIGNUP BUTTON ##############################    
        
    GridLayout:
        cols: 1
        size_hint_y: 0.4 # signup label (.2 size_hint_y) + boxlayout (.3 size_hint_y) + RESERVED GAP (.1 size_hint_y)
        
        FloatLayout:
            Button:
                size_hint: (.4, .4)
                pos_hint: {'center_x': 0.5, 'top': 1}
                on_press: 
                    root.manager.current = 'patient login' if root.valid_credentials(patemail, patpass, patpassconfirm, patDriverId) else 'patient signup'


                color: rgba(Colors.BLUE)
                background_normal: '' #https://stackoverflow.com/a/49100826/12514570
                text: 'Signup'
                font_size: min(self.width*0.3, self.height) * 0.5

                background_color: rgba(Colors.LIGHT_BLUE)
#                 background_down: 'assets/orange_button_down.png'

                canvas.before:
                    Color:
                        rgb: rgba(Colors.BLUE)
                    Line:
                        width: 3
                        rectangle: self.x, self.y, self.width, self.height
                            
        ############################## Error Button ##############################
            Label:
                id: errorlbl
                text: ''
                color: rgba(255, 0, 0)
                font_size: 15
                pos_hint: {'center_y': 0.3}

                            
        ############################## ALREADY HAVE ACCOUNT ##############################
                        
        Button:
            text: 'Already have an account? Login'
            font_size: min(self.width*0.25, self.height) * 0.15
            color: rgba(Colors.BLUE)
            background_normal: ''
            background_color: rgba(*Colors.BLUE, 0)
            on_press: root.manager.current = 'patient login'

